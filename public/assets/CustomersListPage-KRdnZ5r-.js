import{f as P}from"./Header.vue_vue_type_script_setup_true_lang-5d8KJogs.js";import{_ as U}from"./CustomPagination.vue_vue_type_script_setup_true_lang-CDqsaiPZ.js";import{_ as B,a as L,b as N,c as j}from"./CardTitle.vue_vue_type_script_setup_true_lang-Cqz_4yDM.js";import{_ as F}from"./CardDescription.vue_vue_type_script_setup_true_lang-DDh4bBmQ.js";import{_ as I}from"./Input.vue_vue_type_script_setup_true_lang-B33UzBhU.js";import{b as M,_ as S}from"./auth-DapwXxAQ.js";import{d as z,f as n,z as A,g as D,e as u,a as t,b as l,w as m,u as a,F as b,A as E,o as r,j as x,p as d,c as k,k as T,t as y}from"./index-BBpdZ-ZW.js";import{L as w}from"./loader-circle-CzXcqW1r.js";import{U as $}from"./user-etatcZ2N.js";import"./useForwardPropsEmits-CYvaGRZf.js";import"./DialogTrigger-h3MgdP5h.js";import"./index-CNTVCdLG.js";import"./PopperContent-dU3qWfcg.js";import"./Label.vue_vue_type_script_setup_true_lang-Cvzr01F3.js";import"./x-BvGMFkUo.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-DpiNE-Tl.js";import"./loader-BAMlmQTw.js";import"./users-B9wCgZn8.js";import"./house-D1IETp4g.js";const q={class:"p-6 space-y-8",dir:"rtl"},G={class:"flex flex-col md:flex-row gap-4 items-end mb-6"},H={class:"flex flex-col flex-1"},J={key:0,class:"space-y-4"},K={class:"flex items-center gap-3"},O={class:"font-medium"},Q={class:"text-sm text-muted-foreground"},R={key:0,class:"text-xs text-muted-foreground"},W={key:1,class:"text-center py-8"},X={key:2,class:"flex justify-center py-8"},xe=z({__name:"CustomersListPage",setup(Y){const p=n([]),o=n(!1),h=n(""),c=n(1),_=n(50),V=n(1),f=n(0),v=n(""),g=async()=>{o.value=!0;try{const i=await M.get(`/users?page=${c.value}&search=${v.value||""}`);p.value=i.data.users||[],f.value=i.data.totalItems||0,V.value=Math.ceil(f.value/_.value)}catch(i){h.value=i.message||"فشل في جلب المستخدمين",E.error(h.value)}finally{o.value=!1}};A(c,async(i,e)=>{i!==e&&await g()});const C=async()=>{c.value=1,await g()};return D(g),(i,e)=>(r(),u(b,null,[t(P),l("div",q,[t(a(B),null,{default:m(()=>[t(a(L),null,{default:m(()=>[t(a(N),null,{default:m(()=>[...e[2]||(e[2]=[x("قائمة المستخدمين",-1)])]),_:1}),t(a(F),null,{default:m(()=>[...e[3]||(e[3]=[x("استعرض جميع المستخدمين في النظام",-1)])]),_:1})]),_:1}),t(a(j),null,{default:m(()=>[l("div",G,[l("div",H,[e[4]||(e[4]=l("label",{class:"text-sm font-medium mb-1"},"بحث بالاسم أو الهاتف",-1)),t(a(I),{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=s=>v.value=s),placeholder:"اكتب اسم المستخدم أو رقم الهاتف"},null,8,["modelValue"])]),t(a(S),{onClick:C,disabled:o.value},{default:m(()=>[o.value?(r(),k(a(w),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):d("",!0),e[5]||(e[5]=x(" بحث ",-1))]),_:1},8,["disabled"])]),!o.value&&p.value.length>0?(r(),u("div",J,[(r(!0),u(b,null,T(p.value,s=>(r(),u("div",{key:s.user_id,class:"border border-border rounded-lg p-4 flex items-center justify-between"},[l("div",K,[t(a($),{class:"h-6 w-6 text-primary"}),l("div",null,[l("p",O,y(s.user_name),1),l("p",Q,y(s.user_phone),1),s.user_email?(r(),u("p",R,y(s.user_email),1)):d("",!0)])])]))),128))])):d("",!0),!o.value&&p.value.length===0?(r(),u("div",W,[t(a($),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e[6]||(e[6]=l("p",{class:"text-muted-foreground"},"مافيش مستخدمين حاليا",-1))])):d("",!0),o.value?(r(),u("div",X,[t(a(w),{class:"h-8 w-8 animate-spin text-primary"})])):d("",!0),!o.value&&f.value>_.value?(r(),k(U,{key:3,"current-page":c.value,"total-items":f.value,"items-per-page":_.value,"onUpdate:currentPage":e[1]||(e[1]=s=>c.value=s)},null,8,["current-page","total-items","items-per-page"])):d("",!0)]),_:1})]),_:1})])],64))}});export{xe as default};
