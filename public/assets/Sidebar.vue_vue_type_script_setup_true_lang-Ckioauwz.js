import{d as p,k as c,f as d,w as s,A as m,C,D as B,e as t,B as L,c as x,n as R,r as N,M as A,a as u,b as n,t as g,F as E,j as F,l as V,h as j,i as k,g as H}from"./index-TZd6v5Hm.js";import{P,c as h,e as D,f as I,T as J,_ as y}from"./index-CQf1Xhsn.js";import{H as U}from"./x-Dv3lmHrD.js";import{M as G,a as K,_ as Q,e as X,f as Y,g as Z,h as ee,i as te,b as ae,c as se,d as ne}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-g-Y2GW1p.js";import{u as oe}from"./PopperContent--wvMB_Ff.js";import{u as q,r as W}from"./index-D4VFAAJq.js";var re=p({__name:"MenuLabel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(a){const e=a;return(o,l)=>(d(),c(t(P),C(B(e)),{default:s(()=>[m(o.$slots,"default")]),_:3},16))}}),le=re,ie=p({__name:"MenuSeparator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(a){const e=a;return(o,l)=>(d(),c(t(P),L(e,{role:"separator","aria-orientation":"horizontal"}),{default:s(()=>[m(o.$slots,"default")]),_:3},16))}}),de=ie,ue=p({__name:"DropdownMenuLabel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(a){const e=a;return q(),(o,l)=>(d(),c(t(le),C(B(e)),{default:s(()=>[m(o.$slots,"default")]),_:3},16))}}),ce=ue,pe=p({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(a){const e=a;return q(),(o,l)=>(d(),c(t(de),C(B(e)),{default:s(()=>[m(o.$slots,"default")]),_:3},16))}}),_e=pe;const fe=h("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);const me=h("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);const he=h("id-card-lanyard",[["path",{d:"M13.5 8h-3",key:"xvov4w"}],["path",{d:"m15 2-1 2h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h3",key:"16uttc"}],["path",{d:"M16.899 22A5 5 0 0 0 7.1 22",key:"1d0ppr"}],["path",{d:"m9 2 3 6",key:"1o7bd9"}],["circle",{cx:"12",cy:"15",r:"3",key:"g36mzq"}]]);const ye=h("panel-top-open",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"m15 14-3 3-3-3",key:"g215vf"}]]);const ve=h("store",[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]]);const ge=h("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ke=p({__name:"SheetFooter",props:{class:{}},setup(a){const e=a;return(o,l)=>(d(),x("div",{"data-slot":"sheet-footer",class:R(t(D)("mt-auto flex flex-col gap-2 p-4",e.class))},[m(o.$slots,"default")],2))}}),be=p({__name:"DropdownMenuLabel",props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(a){const e=a,o=W(e,"class","inset"),l=oe(o);return(f,i)=>(d(),c(t(ce),L({"data-slot":"dropdown-menu-label","data-inset":a.inset?"":void 0},t(l),{class:t(D)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",e.class)}),{default:s(()=>[m(f.$slots,"default")]),_:3},16,["data-inset","class"]))}}),xe=p({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,o=W(e,"class");return(l,f)=>(d(),c(t(_e),L({"data-slot":"dropdown-menu-separator"},t(o),{class:t(D)("bg-border -mx-1 my-1 h-px",e.class)}),null,16,["class"]))}}),we=[{title:"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",url:"/management/dashboard",icon:U},{title:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª",url:"/management/orders",icon:I},{title:"Ø§Ù„Ù…Ø·Ø§Ø¹Ù…",url:"/management/restaurants",icon:ve},{title:"Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ†",url:"/management/drivers",icon:J},{title:"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±",url:"/management/reports",icon:fe},{title:"Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†",url:"/management/employees",icon:he},{title:"Ø±Ø³Ø§Ø¦Ù„",url:"/management/messages",icon:G},{title:"Ø§Ù„Ù…Ø¯Ù†",url:"/management/cities",icon:me}],r=N(null),w=N(!1),z=N([]);let _=null,M=!0,S,$;const Me="wss://deliveryshop.cloud";function b(a,e){if(!("Notification"in window)){console.warn("This browser does not support desktop notifications.");return}Notification.permission==="granted"?new Notification(a,{body:e}):Notification.permission!=="denied"&&Notification.requestPermission().then(o=>{o==="granted"&&new Notification(a,{body:e})})}function T(){_&&(clearTimeout(_),_=null),r.value&&r.value.readyState!==WebSocket.CLOSED&&r.value.close(),r.value=new WebSocket(Me),r.value.onopen=()=>{w.value=!0,console.log("âœ… WebSocket connected"),S&&$&&r.value?.send(JSON.stringify({type:"admin_init",branch_id:S,admin_id:$}))},r.value.onmessage=a=>{const e=JSON.parse(a.data);z.value.push(e),e.type==="order_assaging_failed"&&b("ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨",`Ø§Ù„Ø·Ù„Ø¨ Ø±Ù‚Ù… ${e.order_id} Ù„Ù… ÙŠØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„Ø¥Ø±Ø³Ø§Ù„!`),e.type==="late_preparing_order"&&b("Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø·Ù„Ø¨ ÙŠØ³ØªØºØ±Ù‚ ÙˆÙ‚ØªØ§ Ø·ÙˆÙŠÙ„Ø§",`Ø§Ù„Ø·Ù„Ø¨ Ø±Ù‚Ù… ${e.order_id} Ù…Ù† ${e.restaurant} Ù…ØªØ£Ø®Ø± ÙÙŠ Ø§Ù„ØªØ­Ø¶ÙŠØ±`),e.type==="late_pickup_order"&&b("Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ Ù…Ù†Ø° ÙØªØ±Ø© Ø·ÙˆÙŠÙ„Ø©",`Ø§Ù„Ø·Ù„Ø¨ Ø±Ù‚Ù… ${e.order_id} Ù…Ù† ${e.restaurant} Ù„Ù… ÙŠØ³ØªÙ„Ù…Ù‡ Ø£ÙŠ Ø³Ø§Ø¦Ù‚ Ø¨Ø¹Ø¯`),console.log("ðŸ“© New message:",e)},r.value.onclose=a=>{w.value=!1,console.warn("âŒ WebSocket disconnected",a.code,a.reason),M&&(console.log("ðŸ”„ Reconnecting in 3 seconds..."),_=setTimeout(T,3e3))},r.value.onerror=a=>{console.error("âŒ WebSocket error:",a)}}function Se(a,e){return S=a,$=e,(!r.value||r.value.readyState===WebSocket.CLOSED)&&(M=!0,T()),{ws:r,isConnected:w,messages:z,sendMessage:f=>{r.value&&r.value.readyState===WebSocket.OPEN?r.value.send(JSON.stringify(f)):console.warn("WebSocket is not connected. Message not sent:",f)},disconnect:()=>{M=!1,_&&(clearTimeout(_),_=null),r.value&&(r.value.close(),r.value=null)}}}const $e={class:"sticky w-full h-16 border-b border-border bg-card flex items-center justify-between px-6"},Ce={class:"flex justify-center items-center gap-4"},Be={class:"flex-1 p-4 space-y-2 overflow-y-auto"},Le={class:"flex items-center gap-2"},Ne={class:"text-xl font-semibold"},De={class:"flex items-center gap-4"},Pe={class:"text-sm text-muted-foreground"},Ae=p({__name:"Sidebar",setup(a){const e=A(),o=H();Se(e.user.data.branches.branch_id,e.user.data.admin_id);const l=()=>{e.logout(),o.push("/management")};return(f,i)=>{const O=j("RouterLink");return d(),x("header",$e,[u("div",Ce,[n(t(K),null,{default:s(()=>[n(t(X),{"as-child":""},{default:s(()=>[n(t(y),null,{default:s(()=>[n(t(ye),{class:"-rotate-90 w-10 h-10"})]),_:1})]),_:1}),n(t(Y),{side:"left"},{default:s(()=>[n(t(Z),{class:"text-center border-b"},{default:s(()=>[n(t(ee),null,{default:s(()=>[...i[0]||(i[0]=[u("h1",{class:"text-2xl font-semibold text-primary"},"Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©",-1)])]),_:1}),n(t(te),null,{default:s(()=>[...i[1]||(i[1]=[u("p",{class:"text-xs text-muted-foreground mt-1"}," Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙˆØµÙŠÙ„ ",-1)])]),_:1})]),_:1}),u("nav",Be,[(d(!0),x(E,null,F(t(we),v=>(d(),c(O,{to:v.url,class:"flex items-center gap-2"},{default:s(()=>[n(t(y),{variant:"ghost",class:"w-full justify-start gap-2"},{default:s(()=>[(d(),c(V(v.icon),{class:"w-4 h-4"})),u("p",null,g(v.title),1)]),_:2},1024)]),_:2},1032,["to"]))),256))]),n(t(ke),null,{default:s(()=>[n(t(y),{class:"w-full",onClick:l},{default:s(()=>[...i[2]||(i[2]=[k(" ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ ",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),u("div",Le,[u("h2",Ne,g(t(e).user.data.admin_name),1)])]),u("div",De,[u("span",Pe,g(t(e).user.data.role.role_name),1),n(t(Q),null,{default:s(()=>[n(t(ae),{"as-child":""},{default:s(()=>[n(t(y),{variant:"ghost",size:"icon"},{default:s(()=>[n(t(ge),{class:"size-5"})]),_:1})]),_:1}),n(t(se),{align:"end"},{default:s(()=>[n(t(be),null,{default:s(()=>[...i[3]||(i[3]=[k("Ø§Ù„Ø­Ø³Ø§Ø¨",-1)])]),_:1}),n(t(xe)),n(t(ne),{onClick:l},{default:s(()=>[...i[4]||(i[4]=[k(" ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ ",-1)])]),_:1})]),_:1})]),_:1})])])}}});export{fe as B,ve as S,Ae as _,Se as u};
