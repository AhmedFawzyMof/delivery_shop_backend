import{O as r,f as n}from"./index-C5NPDLxV.js";const e=n(null),s=n(!1),c=n([]),u="wss://deliveryshop.cloud";function v(l){function t(){e.value=new WebSocket(u),e.value.onopen=()=>{s.value=!0,console.log("âœ… WebSocket connected"),e.value?.send(JSON.stringify({type:"restaurant_init",restaurant_id:l}))},e.value.onmessage=o=>{const a=JSON.parse(o.data);c.value.push(a),console.log("ðŸ“© New message:",a)},e.value.onclose=()=>{s.value=!1,console.warn("âŒ WebSocket disconnected, reconnecting..."),setTimeout(t,3e3)},e.value.onerror=o=>{console.error("WebSocket error:",o),e.value?.close()}}return t(),r(()=>e.value?.close()),{ws:e,isConnected:s,messages:c,sendMessage:o=>{e.value&&e.value.readyState===WebSocket.OPEN&&e.value.send(JSON.stringify(o))}}}export{u as W,v as u};
