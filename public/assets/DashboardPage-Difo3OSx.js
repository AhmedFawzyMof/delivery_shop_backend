import{_ as n,a as d,b as u,c as i}from"./CardTitle.vue_vue_type_script_setup_true_lang--LHH3i02.js";import{c as S,f as V,T as B,b as C}from"./index-CQf1Xhsn.js";import{d as F,r as f,M as N,o as R,g as T,c as m,b as t,a as s,w as a,e,F as M,x as q,Q as A,s as E,f as p,i as _,t as o,j as L}from"./index-TZd6v5Hm.js";import{_ as P,S as H}from"./Sidebar.vue_vue_type_script_setup_true_lang-Ckioauwz.js";import"./x-Dv3lmHrD.js";import"./index-D4VFAAJq.js";import"./PopperContent--wvMB_Ff.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-g-Y2GW1p.js";const D=S("signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]);const I=S("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),O={class:"flex-1 overflow-auto bg-background p-8 space-y-8"},Q={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},U={class:"flex items-center justify-between"},z={class:"text-3xl font-bold text-foreground"},G={class:"flex items-center justify-between"},J={class:"text-3xl font-bold text-foreground"},K={class:"flex items-center justify-between"},W={class:"text-3xl font-bold text-foreground"},X={class:"flex items-center justify-between"},Y={class:"text-3xl font-bold text-foreground"},Z={class:"flex items-center justify-between"},tt={class:"text-3xl font-bold text-foreground"},et={class:"flex items-center justify-between"},st={class:"text-3xl font-bold text-foreground"},at={class:"w-full text-sm text-right"},lt={class:"py-2 font-medium"},rt={key:1},pt=F({__name:"DashboardPage",setup(ot){const v=f(0),b=f(0),h=f(0),k=f(0),w=f(0),j=f(0),x=f([]),y=N(),g=T();async function $(){try{const r=await q.get("/admins/dashboard");v.value=r.data.stats.order_count,b.value=r.data.stats.orders_picked,h.value=r.data.stats.total_drivers,k.value=r.data.activeDrivers,w.value=r.data.stats.total_restaurants,j.value=r.data.stats.total_price,x.value=r.data.orders}catch(r){r instanceof A&&(console.error(r.response?.data),E.error(r.response?.data?.message||"فشل في جلب البيانات"))}}return R(async()=>{if(y.user.data.role.role_id===3){g.push("/management/drivers");return}if(y.user.data.role.role_id===4){g.push("/management/orders");return}if(y.user.data.role.role_id===5){g.push("/management/restaurants");return}await $()}),(r,l)=>(p(),m(M,null,[t(P),s("main",O,[l[9]||(l[9]=s("div",null,[s("h2",{class:"text-3xl font-bold text-foreground"},"لوحة التحكم"),s("p",{class:"text-muted-foreground mt-1"}," مرحباً بعودتك إلى نظام إدارة الطلبات والتوصيل ")],-1)),s("div",Q,[t(e(n),null,{default:a(()=>[t(e(d),null,{default:a(()=>[s("div",U,[t(e(u),null,{default:a(()=>[...l[0]||(l[0]=[_("إجمالي الطلبات",-1)])]),_:1}),t(e(V),{class:"w-5 h-5 text-primary"})])]),_:1}),t(e(i),null,{default:a(()=>[s("p",z,o(v.value),1)]),_:1})]),_:1}),t(e(n),{class:"border-primary/50 bg-primary/5"},{default:a(()=>[t(e(d),null,{default:a(()=>[s("div",G,[t(e(u),null,{default:a(()=>[...l[1]||(l[1]=[_("طلبات قيد التوصيل",-1)])]),_:1}),t(e(B),{class:"w-5 h-5 text-primary"})])]),_:1}),t(e(i),null,{default:a(()=>[s("p",J,o(b.value),1)]),_:1})]),_:1}),t(e(n),null,{default:a(()=>[t(e(d),null,{default:a(()=>[s("div",K,[t(e(u),null,{default:a(()=>[...l[2]||(l[2]=[_("السائقين",-1)])]),_:1}),t(e(I),{class:"w-5 h-5 text-primary"})])]),_:1}),t(e(i),null,{default:a(()=>[s("p",W,o(h.value),1)]),_:1})]),_:1}),t(e(n),{class:"border-primary/50 bg-primary/5"},{default:a(()=>[t(e(d),null,{default:a(()=>[s("div",X,[t(e(u),null,{default:a(()=>[...l[3]||(l[3]=[_("السائقين النشطين",-1)])]),_:1}),t(e(D),{class:"w-5 h-5 text-primary"})])]),_:1}),t(e(i),null,{default:a(()=>[s("p",Y,o(k.value),1)]),_:1})]),_:1}),t(e(n),null,{default:a(()=>[t(e(d),null,{default:a(()=>[s("div",Z,[t(e(u),null,{default:a(()=>[...l[4]||(l[4]=[_("المطاعم",-1)])]),_:1}),t(e(H),{class:"w-5 h-5 text-primary"})])]),_:1}),t(e(i),null,{default:a(()=>[s("p",tt,o(w.value),1)]),_:1})]),_:1}),t(e(n),{class:"border-primary/50 bg-primary/5"},{default:a(()=>[t(e(d),null,{default:a(()=>[s("div",et,[t(e(u),null,{default:a(()=>[...l[5]||(l[5]=[_("إجمالي أرباح التسليم",-1)])]),_:1}),t(e(D),{class:"w-5 h-5 text-primary"})])]),_:1}),t(e(i),null,{default:a(()=>[s("p",st,o(j.value||0),1)]),_:1})]),_:1})]),t(e(n),null,{default:a(()=>[t(e(d),null,{default:a(()=>[t(e(u),null,{default:a(()=>[...l[6]||(l[6]=[_("الطلبات الأخيرة",-1)])]),_:1})]),_:1}),t(e(i),null,{default:a(()=>[s("table",at,[l[8]||(l[8]=s("thead",{class:"text-muted-foreground border-b border-border"},[s("tr",null,[s("th",{class:"py-2"},"رقم الطلب"),s("th",null,"الحالة"),s("th",null,"السعر")])],-1)),s("tbody",null,[x.value.length>0?(p(!0),m(M,{key:0},L(x.value,c=>(p(),m("tr",{key:c.order_id,class:"border-b border-border hover:bg-muted/40"},[s("td",lt,o(c.order_id),1),s("td",null,o(e(C)(c.order_status)),1),s("td",null,"ج.م "+o(c.order_total_price.toFixed(2)),1)]))),128)):(p(),m("tr",rt,[...l[7]||(l[7]=[s("td",null,[s("p",null,"لا يوجد طلابات")],-1)])]))])])]),_:1})]),_:1})])],64))}});export{pt as default};
