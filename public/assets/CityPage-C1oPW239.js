import{d as H,r as c,o as J,c as _,b as e,a as r,w as t,e as l,v,f as u,i as s,F as V,j as w,k as y,t as p}from"./index-CA42f4_E.js";import{_ as K}from"./Sidebar.vue_vue_type_script_setup_true_lang-xpctyPok.js";import{_ as b}from"./createLucideIcon-CQA1d_da.js";import{_ as B}from"./Input.vue_vue_type_script_setup_true_lang-BxFZfPF3.js";import{_ as N,a as U,b as E,c as h,d as F}from"./SelectValue.vue_vue_type_script_setup_true_lang-BJ2pHowV.js";import{_ as j,a as D,b as I,c as L}from"./CardTitle.vue_vue_type_script_setup_true_lang-BMMfmLgK.js";import{_ as O,a as Q,b as M,c as C,d as R,e as g}from"./TableHeader.vue_vue_type_script_setup_true_lang-CplZ1rSv.js";import"./x-CZ0PUFoU.js";import"./index-BwzvazsC.js";import"./Teleport-Bp9FaB7q.js";import"./truck-BzBRtMdz.js";import"./SheetTrigger.vue_vue_type_script_setup_true_lang-Cx5f8gfG.js";import"./Collection-CcyRMvOg.js";import"./check-CE64dgAb.js";import"./PopperContent-BNWXF64O.js";const W={class:"flex h-screen bg-background"},X={class:"w-full flex flex-col p-6"},Y={class:"grid grid-cols-2 gap-4"},Z={key:1},aa={key:1},la={key:0,class:"flex gap-2"},ea={key:1,class:"flex gap-2"},ka=H({__name:"CityPage",setup(ta){const x=c([]),k=c([]),o=c({city_name:"",branch_id:""}),m=c(null),f=c({city_name:"",branch_id:""}),$=async()=>{const i=await v.get("/cities");x.value=i.data},P=async()=>{const i=await v.get("/branches");k.value=i.data.branches},S=async()=>{!o.value.city_name||!o.value.branch_id||(await v.post("/cities",o.value),o.value={city_name:"",branch_id:""},$())},T=i=>{m.value=i.city_id,f.value={city_name:i.city_name,branch_id:i.branch_id}},q=()=>{m.value=null},z=async i=>{await v.put(`/cities/${i}`,f.value),m.value=null,$()},A=async i=>{await v.delete(`/cities/${i}`),$()},G=i=>{const a=k.value.find(n=>n.branch_id===i);return a?a.branch_name:"—"};return J(()=>{$(),P()}),(i,a)=>(u(),_("div",W,[e(K),r("div",X,[a[17]||(a[17]=r("h1",{class:"text-2xl font-bold mb-6"},"إدارة المدن",-1)),e(l(j),{class:"mb-6"},{default:t(()=>[e(l(D),null,{default:t(()=>[e(l(I),null,{default:t(()=>[...a[4]||(a[4]=[s("إضافة مدينة جديدة",-1)])]),_:1})]),_:1}),e(l(L),null,{default:t(()=>[r("div",Y,[r("div",null,[a[5]||(a[5]=r("label",{class:"mb-1 block"},"اسم المدينة",-1)),e(l(B),{modelValue:o.value.city_name,"onUpdate:modelValue":a[0]||(a[0]=n=>o.value.city_name=n),placeholder:"مثال: المعادي"},null,8,["modelValue"])]),r("div",null,[a[6]||(a[6]=r("label",{class:"mb-1 block"},"الفرع",-1)),e(l(N),{modelValue:o.value.branch_id,"onUpdate:modelValue":a[1]||(a[1]=n=>o.value.branch_id=n)},{default:t(()=>[e(l(U),null,{default:t(()=>[e(l(E),{placeholder:"اختر الفرع"})]),_:1}),e(l(h),null,{default:t(()=>[(u(!0),_(V,null,w(k.value,n=>(u(),y(l(F),{key:n.branch_id,value:n.branch_id},{default:t(()=>[s(p(n.branch_name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),e(l(b),{class:"mt-4",onClick:S},{default:t(()=>[...a[7]||(a[7]=[s("إضافة المدينة",-1)])]),_:1})]),_:1})]),_:1}),e(l(j),null,{default:t(()=>[e(l(D),null,{default:t(()=>[e(l(I),null,{default:t(()=>[...a[8]||(a[8]=[s("قائمة المدن",-1)])]),_:1})]),_:1}),e(l(L),null,{default:t(()=>[e(l(O),null,{default:t(()=>[e(l(Q),null,{default:t(()=>[e(l(M),null,{default:t(()=>[e(l(C),null,{default:t(()=>[...a[9]||(a[9]=[s("رقم",-1)])]),_:1}),e(l(C),null,{default:t(()=>[...a[10]||(a[10]=[s("اسم المدينة",-1)])]),_:1}),e(l(C),null,{default:t(()=>[...a[11]||(a[11]=[s("الفرع",-1)])]),_:1}),e(l(C),null,{default:t(()=>[...a[12]||(a[12]=[s("الإجراءات",-1)])]),_:1})]),_:1})]),_:1}),e(l(R),null,{default:t(()=>[(u(!0),_(V,null,w(x.value,n=>(u(),y(l(M),{key:n.city_id},{default:t(()=>[e(l(g),null,{default:t(()=>[s(p(n.city_id),1)]),_:2},1024),e(l(g),null,{default:t(()=>[m.value===n.city_id?(u(),y(l(B),{key:0,modelValue:f.value.city_name,"onUpdate:modelValue":a[2]||(a[2]=d=>f.value.city_name=d),class:"w-40"},null,8,["modelValue"])):(u(),_("span",Z,p(n.city_name),1))]),_:2},1024),e(l(g),null,{default:t(()=>[m.value===n.city_id?(u(),y(l(N),{key:0,modelValue:f.value.branch_id,"onUpdate:modelValue":a[3]||(a[3]=d=>f.value.branch_id=d)},{default:t(()=>[e(l(U),{class:"w-40"},{default:t(()=>[e(l(E))]),_:1}),e(l(h),null,{default:t(()=>[(u(!0),_(V,null,w(k.value,d=>(u(),y(l(F),{key:d.branch_id,value:d.branch_id},{default:t(()=>[s(p(d.branch_name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])):(u(),_("span",aa,p(G(n.branch_id)),1))]),_:2},1024),e(l(g),null,{default:t(()=>[m.value===n.city_id?(u(),_("div",la,[e(l(b),{variant:"default",onClick:d=>z(n.city_id)},{default:t(()=>[...a[13]||(a[13]=[s(" حفظ ",-1)])]),_:1},8,["onClick"]),e(l(b),{variant:"secondary",onClick:q},{default:t(()=>[...a[14]||(a[14]=[s(" إلغاء ",-1)])]),_:1})])):(u(),_("div",ea,[e(l(b),{variant:"outline",onClick:d=>T(n)},{default:t(()=>[...a[15]||(a[15]=[s(" تعديل ",-1)])]),_:1},8,["onClick"]),e(l(b),{variant:"destructive",onClick:d=>A(n.city_id)},{default:t(()=>[...a[16]||(a[16]=[s(" حذف ",-1)])]),_:1},8,["onClick"])]))]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})])]))}});export{ka as default};
