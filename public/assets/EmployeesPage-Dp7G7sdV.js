import{d as G,r as _,M as I,o as L,c as b,b as l,a as v,k as f,m as w,e,w as n,F as C,x as $,f as o,i as t,j as N,t as u,n as q,s as U}from"./index-TZd6v5Hm.js";import{_ as H}from"./Sidebar.vue_vue_type_script_setup_true_lang-Ckioauwz.js";import{_ as J,a as K,b as O,c as Q,d as W}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DSSqtd07.js";import{_ as k}from"./Input.vue_vue_type_script_setup_true_lang-Bj6C5Fsj.js";import{_ as c}from"./index-CQf1Xhsn.js";import{_ as X}from"./Checkbox.vue_vue_type_script_setup_true_lang-NypWs3Nd.js";import{_ as Y,a as Z,b as S,c as m,d as h,e as r}from"./TableHeader.vue_vue_type_script_setup_true_lang-DLlrgTms.js";import{_ as aa,a as ea,b as la,c as na,d as sa}from"./SelectValue.vue_vue_type_script_setup_true_lang-o64Dm6M0.js";import{_ as ta,a as ia}from"./SelectLabel.vue_vue_type_script_setup_true_lang-D9EsVPvK.js";import{a as da,_ as oa}from"./CustomPagination.vue_vue_type_script_setup_true_lang-C56SBDgm.js";import{h as y}from"./hasPermission-zJzLI1JE.js";import"./x-Dv3lmHrD.js";import"./index-D4VFAAJq.js";import"./PopperContent--wvMB_Ff.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-g-Y2GW1p.js";import"./index-DSgkQ9qN.js";import"./check-BuCm8Ksx.js";const ua={class:"p-4",dir:"rtl"},ma={class:"m-4 overflow-auto rounded border"},ra={class:"flex flex-col gap-4 mt-4"},_a={class:"flex items-center gap-2"},fa=25,Na=G({__name:"EmployeesPage",setup(pa){const E=_([]),p=_(!1),g=_(!1),V=I(),A=_([]),M=_(1),P=_(0),i=_({admin_id:null,admin_name:"",admin_email:"",admin_phone:"",password:"",is_active:!0});async function x(){const d=await $.get("/admins");E.value=await d.data.admins,P.value=await d.data.total_admins}async function j(){const d=await $.get("/roles");A.value=await d.data}function F(){g.value=!1,i.value={admin_id:null,admin_name:"",admin_email:"",admin_phone:"",role_id:null,password:"",is_active:!0},p.value=!0}function R(d){g.value=!0,i.value={admin_id:d.admin_id,admin_name:d.admin_name,admin_email:d.admin_email,admin_phone:d.admin_phone,role_id:d.role_id,is_active:d.is_active,password:""},p.value=!0}async function T(){if(g.value){const{data:d}=await $.put(`/admins/${i.value.admin_id}`,{...i.value});U.success(d.message||"تم التعديل بنجاح")}else{const{data:d}=await $.post("/admins",{...i.value});U.success(d.message||"تم الإنشاء بنجاح")}B(),x()}async function z(d){const{data:a}=await $.delete(`/admins/${d}`);U.success(a.message||"تم الحذف بنجاح"),x()}function B(){p.value=!1}return L(async()=>{await x(),await j()}),(d,a)=>(o(),b(C,null,[l(H),v("div",ua,[a[10]||(a[10]=v("h1",{class:"text-2xl font-bold mb-4"},"المديرين",-1)),e(y)(e(V).user.data.role.permissions,"admin:create")?(o(),f(e(c),{key:0,class:"mb-4",onClick:F},{default:n(()=>[...a[9]||(a[9]=[t("إضافة مدير",-1)])]),_:1})):w("",!0)]),v("div",ma,[l(e(Y),{class:"w-full text-left"},{default:n(()=>[l(e(Z),null,{default:n(()=>[l(e(S),null,{default:n(()=>[l(e(m),null,{default:n(()=>[...a[11]||(a[11]=[t("رقم",-1)])]),_:1}),l(e(m),null,{default:n(()=>[...a[12]||(a[12]=[t("الاسم",-1)])]),_:1}),l(e(m),null,{default:n(()=>[...a[13]||(a[13]=[t("الوظيفة",-1)])]),_:1}),l(e(m),null,{default:n(()=>[...a[14]||(a[14]=[t("البريد الإلكتروني",-1)])]),_:1}),l(e(m),null,{default:n(()=>[...a[15]||(a[15]=[t("رقم الهاتف",-1)])]),_:1}),l(e(m),null,{default:n(()=>[...a[16]||(a[16]=[t("الحالة",-1)])]),_:1}),l(e(m),null,{default:n(()=>[...a[17]||(a[17]=[t("تاريخ الإنشاء",-1)])]),_:1}),l(e(m),null,{default:n(()=>[...a[18]||(a[18]=[t("الإجراءات",-1)])]),_:1})]),_:1})]),_:1}),l(e(h),null,{default:n(()=>[(o(!0),b(C,null,N(E.value,s=>(o(),f(e(S),{key:s.admin_id},{default:n(()=>[l(e(r),null,{default:n(()=>[t(u(s.admin_id),1)]),_:2},1024),l(e(r),null,{default:n(()=>[t(u(s.admin_name),1)]),_:2},1024),l(e(r),null,{default:n(()=>[t(u(s.role_name),1)]),_:2},1024),l(e(r),null,{default:n(()=>[t(u(s.admin_email),1)]),_:2},1024),l(e(r),null,{default:n(()=>[t(u(s.admin_phone),1)]),_:2},1024),l(e(r),null,{default:n(()=>[l(e(oa),{class:q(s.is_active?"bg-green-600/80":"bg-red-600/80")},{default:n(()=>[t(u(s.is_active?"نشط":"غير نشط"),1)]),_:2},1032,["class"])]),_:2},1024),l(e(r),null,{default:n(()=>[t(u(s.created_at),1)]),_:2},1024),l(e(r),{class:"flex gap-2"},{default:n(()=>[e(y)(e(V).user.data.role.permissions,"admin:edit")?(o(),f(e(c),{key:0,variant:"secondary",onClick:D=>R(s)},{default:n(()=>[...a[19]||(a[19]=[t(" تعديل ",-1)])]),_:1},8,["onClick"])):w("",!0),e(y)(e(V).user.data.role.permissions,"admin:delete")?(o(),f(e(c),{key:1,variant:"destructive",onClick:D=>z(s.admin_id)},{default:n(()=>[...a[20]||(a[20]=[t(" حذف ",-1)])]),_:1},8,["onClick"])):w("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),e(y)(e(V).user.data.role.permissions,"admin:edit")?(o(),f(e(J),{key:0,open:p.value,"onUpdate:open":a[7]||(a[7]=s=>p.value=s)},{default:n(()=>[l(e(W),null,{default:n(()=>[l(e(K),null,{default:n(()=>[l(e(O),null,{default:n(()=>[t(u(g.value?"تعديل مدير":"إنشاء مدير"),1)]),_:1})]),_:1}),v("div",ra,[l(e(k),{modelValue:i.value.admin_name,"onUpdate:modelValue":a[0]||(a[0]=s=>i.value.admin_name=s),placeholder:"الاسم"},null,8,["modelValue"]),l(e(k),{modelValue:i.value.admin_email,"onUpdate:modelValue":a[1]||(a[1]=s=>i.value.admin_email=s),placeholder:"البريد الإلكتروني"},null,8,["modelValue"]),l(e(k),{modelValue:i.value.admin_phone,"onUpdate:modelValue":a[2]||(a[2]=s=>i.value.admin_phone=s),placeholder:"رقم الهاتف"},null,8,["modelValue"]),l(e(aa),{"onUpdate:modelValue":[a[3]||(a[3]=s=>i.value.role_id=s),a[4]||(a[4]=s=>i.value.role_id=s)],modelValue:i.value.role_id},{default:n(()=>[l(e(ea),{class:"w-full"},{default:n(()=>[l(e(la),{placeholder:"اختر وظيفة"})]),_:1}),l(e(na),null,{default:n(()=>[l(e(ta),null,{default:n(()=>[l(e(ia),null,{default:n(()=>[...a[21]||(a[21]=[t("الوظيفة",-1)])]),_:1}),(o(!0),b(C,null,N(A.value,s=>(o(),f(e(sa),{key:s.role_id,value:s.role_id},{default:n(()=>[t(u(s.role_name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(e(k),{modelValue:i.value.password,"onUpdate:modelValue":a[5]||(a[5]=s=>i.value.password=s),placeholder:"كلمة المرور"},null,8,["modelValue"]),v("label",_a,[l(e(X),{modelValue:i.value.is_active,"onUpdate:modelValue":a[6]||(a[6]=s=>i.value.is_active=s)},null,8,["modelValue"]),a[22]||(a[22]=t(" نشط ",-1))])]),l(e(Q),{class:"mt-6 flex justify-end gap-3"},{default:n(()=>[l(e(c),{variant:"outline",onClick:B},{default:n(()=>[...a[23]||(a[23]=[t("إلغاء",-1)])]),_:1}),l(e(c),{onClick:T},{default:n(()=>[...a[24]||(a[24]=[t("حفظ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])):w("",!0),l(da,{dir:"rtl","current-page":M.value,"total-items":P.value,"items-per-page":fa,"onUpdate:currentPage":a[8]||(a[8]=s=>M.value=s)},null,8,["current-page","total-items"])],64))}});export{Na as default};
