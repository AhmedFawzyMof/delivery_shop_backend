import{d as U,f as c,g as E,e as a,a as M,b as t,v as y,x as g,P as x,F as v,k as m,o,t as u}from"./index-BBpdZ-ZW.js";import{b}from"./auth-DapwXxAQ.js";import{_ as N}from"./Sidebar.vue_vue_type_script_setup_true_lang-i1GJ_p_4.js";import"./house-D1IETp4g.js";import"./truck-Br4A5zbu.js";import"./mail-CAswjs2o.js";const D={class:"flex h-screen bg-background"},F={class:"w-full flex flex-col p-6"},P={class:"bg-white p-4 shadow rounded mb-6"},S={class:"grid grid-cols-2 gap-4"},I=["value"],L={class:"bg-white p-4 shadow rounded"},T={class:"w-full border"},j={class:"p-2 border"},q={class:"p-2 border"},z={key:1},A={class:"p-2 border"},G=["value"],H={key:1},J={class:"p-2 border"},K={key:0},O=["onClick"],Q={key:1},R=["onClick"],W=["onClick"],at=U({__name:"CityPage",setup(X){const h=c([]),_=c([]),i=c({city_name:"",branch_id:""}),d=c(null),r=c({city_name:"",branch_id:""}),p=async()=>{const n=await b.get("/cities");h.value=n.data},k=async()=>{const n=await b.get("/branches");_.value=n.data.branches},f=async()=>{!i.value.city_name||!i.value.branch_id||(await b.post("/cities",i.value),i.value={city_name:"",branch_id:""},p())},w=n=>{d.value=n.city_id,r.value={city_name:n.city_name,branch_id:n.branch_id}},C=()=>{d.value=null},V=async n=>{await b.put(`/cities/${n}`,r.value),d.value=null,p()},$=async n=>{await b.delete(`/cities/${n}`),p()},B=n=>{const e=_.value.find(s=>s.branch_id===n);return e?e.branch_name:"—"};return E(()=>{p(),k()}),(n,e)=>(o(),a("div",D,[M(N),t("div",F,[e[10]||(e[10]=t("h1",{class:"text-2xl font-bold mb-4"},"إدارة المدن",-1)),t("div",P,[e[7]||(e[7]=t("h2",{class:"text-xl font-semibold mb-3"},"إضافة مدينة جديدة",-1)),t("div",S,[t("div",null,[e[4]||(e[4]=t("label",{class:"block mb-1"},"اسم المدينة",-1)),y(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>i.value.city_name=s),type:"text",class:"border p-2 w-full rounded",placeholder:"مثال: المعادي"},null,512),[[g,i.value.city_name]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block mb-1"},"الفرع",-1)),y(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>i.value.branch_id=s),class:"border p-2 w-full rounded"},[e[5]||(e[5]=t("option",{value:""},"اختر الفرع",-1)),(o(!0),a(v,null,m(_.value,s=>(o(),a("option",{key:s.branch_id,value:s.branch_id},u(s.branch_name),9,I))),128))],512),[[x,i.value.branch_id]])])]),t("button",{onClick:f,class:"mt-4 px-4 py-2 bg-blue-600 text-white rounded"}," إضافة المدينة ")]),t("div",L,[e[9]||(e[9]=t("h2",{class:"text-xl font-semibold mb-3"},"قائمة المدن",-1)),t("table",T,[e[8]||(e[8]=t("thead",null,[t("tr",{class:"bg-gray-100 text-left"},[t("th",{class:"p-2 border"},"رقم"),t("th",{class:"p-2 border"},"اسم المدينة"),t("th",{class:"p-2 border"},"الفرع"),t("th",{class:"p-2 border"},"الإجراءات")])],-1)),t("tbody",null,[(o(!0),a(v,null,m(h.value,s=>(o(),a("tr",{key:s.city_id},[t("td",j,u(s.city_id),1),t("td",q,[d.value===s.city_id?y((o(),a("input",{key:0,"onUpdate:modelValue":e[2]||(e[2]=l=>r.value.city_name=l),class:"border p-1 rounded"},null,512)),[[g,r.value.city_name]]):(o(),a("span",z,u(s.city_name),1))]),t("td",A,[d.value===s.city_id?y((o(),a("select",{key:0,"onUpdate:modelValue":e[3]||(e[3]=l=>r.value.branch_id=l),class:"border p-1 rounded"},[(o(!0),a(v,null,m(_.value,l=>(o(),a("option",{key:l.branch_id,value:l.branch_id},u(l.branch_name),9,G))),128))],512)),[[x,r.value.branch_id]]):(o(),a("span",H,u(B(s.branch_id)),1))]),t("td",J,[d.value===s.city_id?(o(),a("div",K,[t("button",{onClick:l=>V(s.city_id),class:"px-3 py-1 bg-green-600 text-white mr-2 rounded"}," حفظ ",8,O),t("button",{onClick:C,class:"px-3 py-1 bg-gray-500 text-white rounded"}," إلغاء ")])):(o(),a("div",Q,[t("button",{onClick:l=>w(s),class:"px-3 py-1 bg-yellow-600 text-white mr-2 rounded"}," تعديل ",8,R),t("button",{onClick:l=>$(s.city_id),class:"px-3 py-1 bg-red-600 text-white rounded"}," حذف ",8,W)]))])]))),128))])])])])]))}});export{at as default};
