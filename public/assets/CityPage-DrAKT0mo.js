import{d as U,f as c,h as E,e as a,a as M,b as t,x as y,y as x,U as g,F as v,l as m,z as u,o as l,t as _}from"./index-QeOVJFhL.js";import{_ as N}from"./Sidebar.vue_vue_type_script_setup_true_lang-ld50fEjl.js";import"./createLucideIcon-5fTLmU3v.js";import"./house-BMLp9h_D.js";import"./truck-YMjkixy8.js";import"./mail-BDho2r1t.js";const D={class:"flex h-screen bg-background"},F={class:"w-full flex flex-col p-6"},S={class:"bg-white p-4 shadow rounded mb-6"},z={class:"grid grid-cols-2 gap-4"},I=["value"],L={class:"bg-white p-4 shadow rounded"},P={class:"w-full border"},T={class:"p-2 border"},j={class:"p-2 border"},q={key:1},A={class:"p-2 border"},G=["value"],H={key:1},J={class:"p-2 border"},K={key:0},O=["onClick"],Q={key:1},R=["onClick"],W=["onClick"],at=U({__name:"CityPage",setup(X){const h=c([]),b=c([]),i=c({city_name:"",branch_id:""}),d=c(null),r=c({city_name:"",branch_id:""}),p=async()=>{const n=await u.get("/cities");h.value=n.data},k=async()=>{const n=await u.get("/branches");b.value=n.data.branches},f=async()=>{!i.value.city_name||!i.value.branch_id||(await u.post("/cities",i.value),i.value={city_name:"",branch_id:""},p())},w=n=>{d.value=n.city_id,r.value={city_name:n.city_name,branch_id:n.branch_id}},C=()=>{d.value=null},V=async n=>{await u.put(`/cities/${n}`,r.value),d.value=null,p()},$=async n=>{await u.delete(`/cities/${n}`),p()},B=n=>{const e=b.value.find(s=>s.branch_id===n);return e?e.branch_name:"—"};return E(()=>{p(),k()}),(n,e)=>(l(),a("div",D,[M(N),t("div",F,[e[10]||(e[10]=t("h1",{class:"text-2xl font-bold mb-4"},"إدارة المدن",-1)),t("div",S,[e[7]||(e[7]=t("h2",{class:"text-xl font-semibold mb-3"},"إضافة مدينة جديدة",-1)),t("div",z,[t("div",null,[e[4]||(e[4]=t("label",{class:"block mb-1"},"اسم المدينة",-1)),y(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>i.value.city_name=s),type:"text",class:"border p-2 w-full rounded",placeholder:"مثال: المعادي"},null,512),[[x,i.value.city_name]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block mb-1"},"الفرع",-1)),y(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>i.value.branch_id=s),class:"border p-2 w-full rounded"},[e[5]||(e[5]=t("option",{value:""},"اختر الفرع",-1)),(l(!0),a(v,null,m(b.value,s=>(l(),a("option",{key:s.branch_id,value:s.branch_id},_(s.branch_name),9,I))),128))],512),[[g,i.value.branch_id]])])]),t("button",{onClick:f,class:"mt-4 px-4 py-2 bg-blue-600 text-white rounded"}," إضافة المدينة ")]),t("div",L,[e[9]||(e[9]=t("h2",{class:"text-xl font-semibold mb-3"},"قائمة المدن",-1)),t("table",P,[e[8]||(e[8]=t("thead",null,[t("tr",{class:"bg-gray-100 text-left"},[t("th",{class:"p-2 border"},"رقم"),t("th",{class:"p-2 border"},"اسم المدينة"),t("th",{class:"p-2 border"},"الفرع"),t("th",{class:"p-2 border"},"الإجراءات")])],-1)),t("tbody",null,[(l(!0),a(v,null,m(h.value,s=>(l(),a("tr",{key:s.city_id},[t("td",T,_(s.city_id),1),t("td",j,[d.value===s.city_id?y((l(),a("input",{key:0,"onUpdate:modelValue":e[2]||(e[2]=o=>r.value.city_name=o),class:"border p-1 rounded"},null,512)),[[x,r.value.city_name]]):(l(),a("span",q,_(s.city_name),1))]),t("td",A,[d.value===s.city_id?y((l(),a("select",{key:0,"onUpdate:modelValue":e[3]||(e[3]=o=>r.value.branch_id=o),class:"border p-1 rounded"},[(l(!0),a(v,null,m(b.value,o=>(l(),a("option",{key:o.branch_id,value:o.branch_id},_(o.branch_name),9,G))),128))],512)),[[g,r.value.branch_id]]):(l(),a("span",H,_(B(s.branch_id)),1))]),t("td",J,[d.value===s.city_id?(l(),a("div",K,[t("button",{onClick:o=>V(s.city_id),class:"px-3 py-1 bg-green-600 text-white mr-2 rounded"}," حفظ ",8,O),t("button",{onClick:C,class:"px-3 py-1 bg-gray-500 text-white rounded"}," إلغاء ")])):(l(),a("div",Q,[t("button",{onClick:o=>w(s),class:"px-3 py-1 bg-yellow-600 text-white mr-2 rounded"}," تعديل ",8,R),t("button",{onClick:o=>$(s.city_id),class:"px-3 py-1 bg-red-600 text-white rounded"}," حذف ",8,W)]))])]))),128))])])])])]))}});export{at as default};
