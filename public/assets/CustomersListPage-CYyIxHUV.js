import{a as P}from"./Header.vue_vue_type_script_setup_true_lang-CsM1UwTE.js";import{_ as U}from"./CustomPagination.vue_vue_type_script_setup_true_lang-Dg6h4slZ.js";import{_ as B,a as L,b as N,c as j}from"./CardTitle.vue_vue_type_script_setup_true_lang-CBxe4J3O.js";import{_ as F}from"./CardDescription.vue_vue_type_script_setup_true_lang-49_jE5iZ.js";import{_ as I}from"./Input.vue_vue_type_script_setup_true_lang-CkF3edwu.js";import{_ as M}from"./createLucideIcon-CsQdoSwz.js";import{d as S,f as i,x as q,h as z,e as m,a as t,b as r,w as u,u as a,F as b,y as D,z as E,o as l,k as g,q as d,c as k,l as T,t as y}from"./index-C5NPDLxV.js";import{L as w}from"./loader-circle-0Wq6zGOl.js";import{U as $}from"./user-CPz9786G.js";import"./useForwardPropsEmits-Dvl0W8HD.js";import"./DialogTitle-Rq1bJPJW.js";import"./index-DmxO9ILx.js";import"./Teleport-DG6z2lou.js";import"./DialogTrigger-DVsMfrUK.js";import"./Label.vue_vue_type_script_setup_true_lang-CymdxQ0O.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Bd8clJB1.js";import"./x-CUtjdDId.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-B0FAWFRc.js";import"./Collection-YunEvKz8.js";import"./check-a5TxdJkG.js";import"./PopperContent-Dposcc7J.js";import"./SelectLabel.vue_vue_type_script_setup_true_lang-D4v1WdiU.js";import"./loader-B2BrVlWD.js";import"./users-C5RuwNL5.js";import"./house-D0NNoEeP.js";const A={class:"p-6 space-y-8",dir:"rtl"},G={class:"flex flex-col md:flex-row gap-4 items-end mb-6"},H={class:"flex flex-col flex-1"},J={key:0,class:"space-y-4"},K={class:"flex items-center gap-3"},O={class:"font-medium"},Q={class:"text-sm text-muted-foreground"},R={key:0,class:"text-xs text-muted-foreground"},W={key:1,class:"text-center py-8"},X={key:2,class:"flex justify-center py-8"},$e=S({__name:"CustomersListPage",setup(Y){const p=i([]),o=i(!1),h=i(""),c=i(1),_=i(50),V=i(1),f=i(0),v=i(""),x=async()=>{o.value=!0;try{const n=await D.get(`/users?page=${c.value}&search=${v.value||""}`);p.value=n.data.users||[],f.value=n.data.totalItems||0,V.value=Math.ceil(f.value/_.value)}catch(n){h.value=n.message||"فشل في جلب المستخدمين",E.error(h.value)}finally{o.value=!1}};q(c,async(n,e)=>{n!==e&&await x()});const C=async()=>{c.value=1,await x()};return z(x),(n,e)=>(l(),m(b,null,[t(P),r("div",A,[t(a(B),null,{default:u(()=>[t(a(L),null,{default:u(()=>[t(a(N),null,{default:u(()=>[...e[2]||(e[2]=[g("قائمة المستخدمين",-1)])]),_:1}),t(a(F),null,{default:u(()=>[...e[3]||(e[3]=[g("استعرض جميع المستخدمين في النظام",-1)])]),_:1})]),_:1}),t(a(j),null,{default:u(()=>[r("div",G,[r("div",H,[e[4]||(e[4]=r("label",{class:"text-sm font-medium mb-1"},"بحث بالاسم أو الهاتف",-1)),t(a(I),{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=s=>v.value=s),placeholder:"اكتب اسم المستخدم أو رقم الهاتف"},null,8,["modelValue"])]),t(a(M),{onClick:C,disabled:o.value},{default:u(()=>[o.value?(l(),k(a(w),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):d("",!0),e[5]||(e[5]=g(" بحث ",-1))]),_:1},8,["disabled"])]),!o.value&&p.value.length>0?(l(),m("div",J,[(l(!0),m(b,null,T(p.value,s=>(l(),m("div",{key:s.user_id,class:"border border-border rounded-lg p-4 flex items-center justify-between"},[r("div",K,[t(a($),{class:"h-6 w-6 text-primary"}),r("div",null,[r("p",O,y(s.user_name),1),r("p",Q,y(s.user_phone),1),s.user_email?(l(),m("p",R,y(s.user_email),1)):d("",!0)])])]))),128))])):d("",!0),!o.value&&p.value.length===0?(l(),m("div",W,[t(a($),{class:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e[6]||(e[6]=r("p",{class:"text-muted-foreground"},"مافيش مستخدمين حاليا",-1))])):d("",!0),o.value?(l(),m("div",X,[t(a(w),{class:"h-8 w-8 animate-spin text-primary"})])):d("",!0),!o.value&&f.value>_.value?(l(),k(U,{key:3,"current-page":c.value,"total-items":f.value,"items-per-page":_.value,"onUpdate:currentPage":e[1]||(e[1]=s=>c.value=s)},null,8,["current-page","total-items","items-per-page"])):d("",!0)]),_:1})]),_:1})])],64))}});export{$e as default};
