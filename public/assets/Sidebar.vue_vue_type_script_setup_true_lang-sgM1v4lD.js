import{d as b,c as S,f as c,E as C,n as W,e as n,r as w,Q as L,k as h,w as s,b as o,a as u,j as T,h as B,l as O,t as R,F as z,i as E,g as P}from"./index-DjU-SR4D.js";import{c as d,a as V,_}from"./createLucideIcon-CpkhF4YH.js";import{H as A}from"./x-CN-yFgvQ.js";import{P as D,T as I}from"./truck-CcAql6eW.js";import{M as F,_ as H,a as J,c as j,d as q,e as U,b as Q}from"./SheetTrigger.vue_vue_type_script_setup_true_lang-czE_r7b2.js";const G=d("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);const K=d("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);const X=d("id-card-lanyard",[["path",{d:"M13.5 8h-3",key:"xvov4w"}],["path",{d:"m15 2-1 2h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h3",key:"16uttc"}],["path",{d:"M16.899 22A5 5 0 0 0 7.1 22",key:"1d0ppr"}],["path",{d:"m9 2 3 6",key:"1o7bd9"}],["circle",{cx:"12",cy:"15",r:"3",key:"g36mzq"}]]);const Y=d("panel-top-open",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"m15 14-3 3-3-3",key:"g215vf"}]]);const Z=d("store",[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]]),ee=b({__name:"SheetFooter",props:{class:{}},setup(a){const e=a;return(l,p)=>(c(),S("div",{"data-slot":"sheet-footer",class:W(n(V)("mt-auto flex flex-col gap-2 p-4",e.class))},[C(l.$slots,"default")],2))}}),te=[{title:"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",url:"/management/dashboard",icon:A},{title:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª",url:"/management/orders",icon:D},{title:"Ø§Ù„Ù…Ø·Ø§Ø¹Ù…",url:"/management/restaurants",icon:Z},{title:"Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ†",url:"/management/drivers",icon:I},{title:"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±",url:"/management/reports",icon:G},{title:"Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†",url:"/management/employees",icon:X},{title:"Ø±Ø³Ø§Ø¦Ù„",url:"/management/messages",icon:F},{title:"Ø§Ù„Ù…Ø¯Ù†",url:"/management/cities",icon:K}],t=w(null),k=w(!1),M=w([]);let r=null,g=!0,v,x;const ae="wss://deliveryshop.cloud";function y(a,e){if(!("Notification"in window)){console.warn("This browser does not support desktop notifications.");return}Notification.permission==="granted"?new Notification(a,{body:e}):Notification.permission!=="denied"&&Notification.requestPermission().then(l=>{l==="granted"&&new Notification(a,{body:e})})}function N(){r&&(clearTimeout(r),r=null),t.value&&t.value.readyState!==WebSocket.CLOSED&&t.value.close(),t.value=new WebSocket(ae),t.value.onopen=()=>{k.value=!0,console.log("âœ… WebSocket connected"),v&&x&&t.value?.send(JSON.stringify({type:"admin_init",branch_id:v,admin_id:x}))},t.value.onmessage=a=>{const e=JSON.parse(a.data);M.value.push(e),e.type==="order_assaging_failed"&&y("ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨",`Ø§Ù„Ø·Ù„Ø¨ Ø±Ù‚Ù… ${e.order_id} Ù„Ù… ÙŠØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„Ø¥Ø±Ø³Ø§Ù„!`),e.type==="late_preparing_order"&&y("Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø·Ù„Ø¨ ÙŠØ³ØªØºØ±Ù‚ ÙˆÙ‚ØªØ§ Ø·ÙˆÙŠÙ„Ø§",`Ø§Ù„Ø·Ù„Ø¨ Ø±Ù‚Ù… ${e.order_id} Ù…Ù† ${e.restaurant} Ù…ØªØ£Ø®Ø± ÙÙŠ Ø§Ù„ØªØ­Ø¶ÙŠØ±`),e.type==="late_pickup_order"&&y("Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ Ù…Ù†Ø° ÙØªØ±Ø© Ø·ÙˆÙŠÙ„Ø©",`Ø§Ù„Ø·Ù„Ø¨ Ø±Ù‚Ù… ${e.order_id} Ù…Ù† ${e.restaurant} Ù„Ù… ÙŠØ³ØªÙ„Ù…Ù‡ Ø£ÙŠ Ø³Ø§Ø¦Ù‚ Ø¨Ø¹Ø¯`),console.log("ðŸ“© New message:",e)},t.value.onclose=a=>{k.value=!1,console.warn("âŒ WebSocket disconnected",a.code,a.reason),g&&(console.log("ðŸ”„ Reconnecting in 3 seconds..."),r=setTimeout(N,3e3))},t.value.onerror=a=>{console.error("âŒ WebSocket error:",a)}}function ne(a,e){return v=a,x=e,(!t.value||t.value.readyState===WebSocket.CLOSED)&&(g=!0,N()),{ws:t,isConnected:k,messages:M,sendMessage:f=>{t.value&&t.value.readyState===WebSocket.OPEN?t.value.send(JSON.stringify(f)):console.warn("WebSocket is not connected. Message not sent:",f)},disconnect:()=>{g=!1,r&&(clearTimeout(r),r=null),t.value&&(t.value.close(),t.value=null)}}}const se={class:"flex-1 p-4 space-y-2 overflow-y-auto"},de=b({__name:"Sidebar",setup(a){const e=L(),l=P();ne(e.user.data.branches.branch_id,e.user.data.admin_id);const p=()=>{e.logout(),l.push("/management")};return(f,i)=>{const $=B("RouterLink");return c(),h(n(H),null,{default:s(()=>[o(n(J),{"as-child":""},{default:s(()=>[o(n(_),{class:"mt-3 ml-2"},{default:s(()=>[o(n(Y),{class:"-rotate-90 w-10 h-10"})]),_:1})]),_:1}),o(n(Q),{side:"left"},{default:s(()=>[o(n(j),{class:"text-center border-b"},{default:s(()=>[o(n(q),null,{default:s(()=>[...i[0]||(i[0]=[u("h1",{class:"text-2xl font-semibold text-primary"},"Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©",-1)])]),_:1}),o(n(U),null,{default:s(()=>[...i[1]||(i[1]=[u("p",{class:"text-xs text-muted-foreground mt-1"},"Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙˆØµÙŠÙ„",-1)])]),_:1})]),_:1}),u("nav",se,[(c(!0),S(z,null,T(n(te),m=>(c(),h($,{to:m.url,class:"flex items-center gap-2"},{default:s(()=>[o(n(_),{variant:"ghost",class:"w-full justify-start gap-2"},{default:s(()=>[(c(),h(O(m.icon),{class:"w-4 h-4"})),u("p",null,R(m.title),1)]),_:2},1024)]),_:2},1032,["to"]))),256))]),o(n(ee),null,{default:s(()=>[o(n(_),{class:"w-full",onClick:p},{default:s(()=>[...i[2]||(i[2]=[E(" ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})}}});export{Z as S,de as _,ne as u};
