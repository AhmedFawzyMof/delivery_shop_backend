import{d as x,f as r,Q as _,h as w,i as k,e as m,b as e,a as y,u as l,v as M,q as j,x as h,y as C,R as V,c as L,p as S,t as v,w as B,o as c,k as D,z as E,A as N}from"./index-CTakD6A6.js";import{c as b,_ as T}from"./createLucideIcon-Dne6exBT.js";import{E as A}from"./eye-BwDrF1bL.js";/**
 * @license lucide-vue-next v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=b("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-vue-next v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=b("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]),R={class:"min-h-screen bg-gradient-to-br from-background to-muted flex items-center justify-center p-4",dir:"rtl"},U={class:"w-full max-w-md space-y-8"},$={class:"text-center space-y-2"},q={class:"flex justify-center"},z={class:"w-14 h-14 rounded-xl bg-primary/20 flex items-center justify-center"},H={class:"w-10 h-10 rounded-lg bg-primary flex items-center justify-center"},O={class:"space-y-2"},Q=["disabled"],F={class:"space-y-2"},G={class:"relative"},J=["type","disabled"],K=["disabled"],W={key:0,class:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg"},X={class:"text-sm text-red-600"},se=x({__name:"LoginPage",setup(Y){const p=k(),i=r(""),u=r(""),d=r(!1),a=r(""),o=r(!1),f=_(),g=async()=>{a.value="",o.value=!0;try{const s=await E.post("/auth/admin/login",{identifier:i.value,password:u.value});s.status===200&&(f.login(s.data.sessionToken,s.data.user),p.push("/management/dashboard"))}catch(s){console.error(s),a.value=s.response?.data?.message||"Login failed",N.error(a.value)}finally{o.value=!1}};return w(async()=>{const s=await f.init();s&&s.data.user&&s.data.user.role==="admin"&&p.push("/management/dashboard")}),(s,t)=>(c(),m("div",R,[e("div",U,[e("div",$,[e("div",q,[e("div",z,[e("div",H,[y(l(P),{class:"w-6 h-6 text-primary-foreground"})])])]),t[3]||(t[3]=e("h1",{class:"text-3xl font-bold text-foreground"},"متجر التوصيل",-1)),t[4]||(t[4]=e("p",{class:"text-muted-foreground"},"لوحة تحكم المشرف",-1))]),e("form",{onSubmit:M(g,["prevent"]),class:"space-y-4"},[e("div",O,[t[5]||(t[5]=e("label",{for:"phone",class:"text-sm font-medium text-foreground"}," البريد الإلكتروني ",-1)),h(e("input",{id:"phone",type:"tel",placeholder:"admin@dashboard.com","onUpdate:modelValue":t[0]||(t[0]=n=>i.value=n),disabled:o.value,class:"w-full px-4 py-2.5 bg-card border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition text-right"},null,8,Q),[[C,i.value]])]),e("div",F,[t[6]||(t[6]=e("label",{for:"password",class:"text-sm font-medium text-foreground"},"كلمة المرور",-1)),e("div",G,[h(e("input",{id:"password",type:d.value?"text":"password",placeholder:"أدخل كلمة المرور الخاصة بك","onUpdate:modelValue":t[1]||(t[1]=n=>u.value=n),disabled:o.value,class:"w-full px-4 py-2.5 bg-card border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition text-right"},null,8,J),[[V,u.value]]),e("button",{type:"button",onClick:t[2]||(t[2]=n=>d.value=!d.value),class:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition",disabled:o.value},[(c(),L(S(d.value?l(I):l(A)),{class:"w-4 h-4"}))],8,K)])]),a.value?(c(),m("div",W,[e("p",X,v(a.value),1)])):j("",!0),y(l(T),{type:"submit",class:"w-full py-2.5 font-medium",disabled:o.value},{default:B(()=>[D(v(o.value?"جارٍ تسجيل الدخول...":"تسجيل الدخول"),1)]),_:1},8,["disabled"])],32)])]))}});export{se as default};
